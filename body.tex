\begin{abstract}
\input{abstract}
\end{abstract}

\maketitle

% lstlisting coq style (inspired from a file of Assia Mahboubi)
% https://tex.stackexchange.com/questions/434523/coq-syntax-highlighting
\section{Introduction}
\label{sec:intro}
\input{introduction.tex}

% Concept 
% Contribution

\section{Design Requirements and Challenges}
% what feature we want
% what problem/formalization we want to achieve
% Before/After Comparison of examples (with/without Fampoly)
\label{sec:background+challenge}
\input{challenge.tex}

\section{Language Design}
% we need to make this section before Metatheory
% because a lot of our formulation in the metatheory
%   is inspired by the implementation
\label{sec:lang-design}
\input{lang-design.tex}

\section{Compiling Family Polymorphism to Parameterized Modules}
% we need to make this section before Metatheory
% because a lot of our formulation in the metatheory
%   is inspired by the implementation
\label{sec:coqimpl}
\input{coqimpl.tex}

\section{\TT: A Core Dependent Type Theory}
\label{sec:metatheory2}
\input{metatheory-condensed.tex}


\section{Case Studies}
\label{sec:casestudies}
\input{casestudies.tex}

\section{Related Work}\label{sec:related-work}
\input{related-work.tex}

\section{Conclusion}
\label{sec:conclusion}

\input{conclusion.tex}

\ifacknowledgments
\section*{Acknowledgments}
We thank the reviewers for their many useful comments.  We thank
Anastasiya Kravchuk-Kirilyuk, Yao Li, and Andrew Myers % others?
for valuable discussions.
This work was supported in part by an Amazon research award on automated
reasoning.
The views and opinions expressed are those of the authors and do not necessarily
reflect the position of any funding agency.
\fi

\setlength{\bibsep}{.8ex}
\bibliographystyle{tex-macros/ACM-Reference-Format.bst}
\bibliography{refs.bib}

\ifreport

\appendix

\newpage

\section{The Complete Story of \TT}
\label{sec:complete-fmltt}
% \input{all-typing-rule.tex} -- we make all-typing rules into metatheory2.tex
\input{metatheory2.tex}

\newpage

\section{Using \TT's Linkage Transformers to Model a Derived Family}
\label{sec:lt-in-action}
\input{stlc-linkTran-typing.tex}

\newpage

\section{Definitive Version of the Formalization and Proofs}
\label{sec:agda-files}
\input{agda-files.tex}

%\section{Metatheory, in detail}
%\label{sec:metatheory}
%\input{metatheory.tex}
%
%\section{Example in Metatheory}
%\label{sec:coqexample}
%\input{coq-example.tex}

\fi