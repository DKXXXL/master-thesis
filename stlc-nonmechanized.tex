\begin{figure}

\newcommand{\headerfont}[1]{\textbf{#1}}

\BeforeBeginEnvironment{mathpar}{%
  \vspace{-.8ex}
}

\fontsize{8.0}{8.8}\selectfont
\def\MathparLineskip{\lineskip=0.1ex}

\fcolorbox{black}{black!10}{
\begin{minipage}{0.42\textwidth}

\noindent%
\headerfont{Types} \hspace{1.0em}
$ \tau \ \Coloneqq\ \mathbb{1} \bnf  \tau_1 \to \tau_2 $
\medskip

\headerfont{Terms} \hspace{0.85em}
$ e \ \Coloneqq\ x \bnf () \bnf \lambda x.\,e \bnf e_1~e_2 $
\medskip

\headerfont{Typing rules}
\begin{mathpar}
\Rule{}{ \Gamma \vdash () : \mathbb{1} }

\Rule{ \Gamma(x)=\tau }{ \Gamma \vdash x : \tau }

\Rule{ \Gamma, x:\tau_1 \vdash e : \tau_2 }{ \Gamma \vdash \lambda x.\,e : \tau_1 \to \tau_2 }

\Rule{
  \Gamma \vdash e_1 : \tau_1 \to \tau_2
  \quad
  \Gamma \vdash e_2 : \tau_1
}{
  \Gamma \vdash e_1~e_2 : \tau_2
}

\end{mathpar}

\headerfont{Value forms}
\begin{mathpar}
\Rule{}{\textit{Val}(())}

\Rule{}{\textit{Val}(\lambda x.\,e)}
\end{mathpar}

\headerfont{Substitution function}
\begin{mathpar}
  \subst{y}{e}{x} \defeq \begin{cases} y, & \text{if } x \neq y \\ e, & \text{if } x = y \end{cases}

  \subst{()}{e}{x} \defeq ()

  \subst{(\lambda y.\,e')}{e}{x} \defeq \begin{cases} \lambda y.\,\subst{e'}{e}{x}, & \text{if } x \neq y \\ \lambda y.\,e', & \text{if } x = y \end{cases}

  \subst{(e_1~e_2)}{e}{x} \defeq \subst{e_1}{e}{x}~\subst{e_2}{e}{x}
\end{mathpar}

\headerfont{Reduction rules}
\begin{mathpar}
\Rule{ e_1 \longrightarrow e_1' }{ e_1~e_2 \longrightarrow e_1'~e_2 }

\Rule{ \textit{Val}(e_1) \quad e_2 \longrightarrow e_2' }{ e_1~e_2 \longrightarrow e_1~e_2' }

\Rule{\textit{Val}(e_2)}{ (\lambda x.\,e_1)~e_2 \longrightarrow \subst{e_2}{e_1}{x} }

\end{mathpar}

\begin{tabular}{@{}l@{\qquad}l@{}}
\headerfont{Substitution lemma} & \headerfont{Preservation theorem} \smallskip\\
\headerfont{Progress theorem} & \headerfont{Type-safety theorem}
\end{tabular}%}

\end{minipage}
}%
\raisebox{26pt}{%
%\tikz \draw [arrows = {-Latex[width'=0pt .5, length=10pt, fill=white]}] (0,0) -- (1,0);
\tikz \draw [
  line width = .5pt,
  arrows = {-Stealth[inset=0pt, length=5pt, fill=white, angle'=60, scale=2]}
] (1.2,0) -- (0,0);%
%https://tikz.dev/tikz-arrows
\fcolorbox{black}{black!10}{
\begin{minipage}{0.39\textwidth}

\noindent%
\headerfont{Types} \hspace{1.0em}
$ \tau \ \Coloneqq\ \cdots $ \textit{(no change)}
\medskip

\headerfont{Terms} \hspace{0.85em}
$ e \ \Coloneqq\ \cdots \bnf \mathrm{fix}\,x.\,e $
\medskip

\headerfont{Typing rules}
\begin{mathpar}
\cdots

\Rule{
  \Gamma, x : \tau \vdash e : \tau
}{
  \Gamma \vdash \mathrm{fix}\,x.\,e : \tau
}

\end{mathpar}

\headerfont{Value forms}
\begin{mathpar}
\cdots \textit{ (no change)}

\end{mathpar}

\headerfont{Substitution function}
\begin{mathpar}
{\raisebox{-8pt}{$\cdots$}}\medskip

\subst{(\mathrm{fix}\,y.\,e')}{e}{x} \defeq \begin{cases} \mathrm{fix}\,y.\,\subst{e'}{e}{x}, & \text{if } x \neq y \\ \mathrm{fix}\,y.\,e', & \text{if } x = y \end{cases}

\end{mathpar}

\headerfont{Reduction rules}
\begin{mathpar}
\cdots

\Rule{}{ \mathrm{fix}\,x.\,e \longrightarrow \subst{e}{\mathrm{fix}\,x.\,e}{x} }

\end{mathpar}

\begin{tabular}{@{}l@{\ \ }l@{}}
\headerfont{Substitution lemma}   & \textit{(a new case required)} \smallskip\\
\headerfont{Preservation theorem} & \textit{(a new case required)} \smallskip\\
\headerfont{Progress theorem}     & \textit{(a new case required)} \smallskip\\
\headerfont{Type-safety theorem}  & \textit{(no change)}
\end{tabular}

\end{minipage}
}%

}

\vspace{-42pt}
\hfill
\begin{minipage}{.48\textwidth}
\fontsize{9.0}{10}\selectfont

Mechanization of
types, terms, typing rules, value forms, and reduction rules is via
inductive types.\smallskip

Mechanization of
lemmas, theorems, and the substitution function is by
induction over inductive types.
\end{minipage}

\caption{%
  STLC metatheories (left) and its extension with fixpoints (right).
}
\label{fig:stlc-nonmechanized}
\end{figure}
