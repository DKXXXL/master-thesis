After considering the pros and cons, we decide to implement a Coq Plugin in which we can add new Vernacular command and translate each command into a bunch of Coq commands (the surface Vernacular command) instead of modify the code-base of Coq. 

Doing so, Despite of the possible difficulty of the future maintenance, this approach has various advantages: 1. it is the most easy and accessible way to prototype; 2. we have a clear definition of trusted-base -- the whole Coq; 3. it is easy to debug -- we just need to check the translated commands; 4. it can be well-incorporated with the VSCoq (and proof general I believe); 5. it is more accessible for the the interested audience who can easily adapt our plugin and give a try -- otherwise they have to download and re-build the whole customized Coq; 6. it is more stable because the surface syntax of Coq should be stable across different versions; 7. still, this plugin can capture the key mechanism of implementing family polymorphism inside Coq and act as a reference for guiding an appropriate implementation of Family Polymorphism inside all sorts of proof assistants.